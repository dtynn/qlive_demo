<!DOCTYPE html>
<html>
<head>
    <title>Live Publisher</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="static/js/swfobject.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
<p>频道：<span id="channel"></span><button id="connect" style="display: none">连接</button></p>
<div id="rtmp-publisher" style="display: none">
    <p>Flash not installed</p>
</div>
</body>
<script type="text/javascript">
    function  randomChar(l)  {
        var  x="abcdefghijklmnopqrstuvwxyz";
        var  tmp="";
        for(var  i=0;i<  l;i++)  {
            tmp  +=  x.charAt(Math.ceil(Math.random()*100000000)%x.length);
        }
        return  tmp;
    }
    var flashVars = {
        streamer: 'rtmp://121.199.14.83/live'
    };
    $().ready(function(){
        var channel = randomChar(5);
        flashVars['file'] = channel;
        $('#channel').html(channel);
        $('#connect').show();
        $('#connect').click(function(){
            if(flashVars['streamer'] && flashVars['file']){
                $('#rtmp-publisher').show();
                swfobject.embedSWF("static/swf/RtmpPublisher.swf", "rtmp-publisher", "500", "400", "9.0.0", null, flashVars);
                $(this).hide();
            }
        });
    })
</script>
</html>